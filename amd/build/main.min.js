define("block_class_material/main",["exports","jquery","core_form/modalform","core/str","core/templates","core/notification","core/modal_delete_cancel"],(function(_exports,_jquery,_modalform,_str,_templates,_notification,_modal_delete_cancel){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_modalform=_interopRequireDefault(_modalform),_templates=_interopRequireDefault(_templates),_notification=_interopRequireDefault(_notification),_modal_delete_cancel=_interopRequireDefault(_modal_delete_cancel);const drawItem=async(root,data)=>{const fileItemTemplate=await _templates.default.render("block_class_material/file-item",data);root.find(".document-container").append(fileItemTemplate),loadActions(root)},loadActions=root=>{const deleteButtons=root.find(".document-item-actions-button-delete");deleteButtons.off(),deleteButtons.on("click",(async event=>{event.preventDefault();(await _modal_delete_cancel.default.create({title:(0,_str.getString)("modal_delete_document_title","block_class_material"),body:(0,_str.getString)("modal_delete_document_body","block_class_material"),isVerticallyCentered:!0})).show()}))};_exports.init=async root=>{(root=>{const triggerElement=root.find("#add_material");triggerElement.off(),triggerElement.on("click",(event=>{event.preventDefault();const modalForm=new _modalform.default({modalConfig:{title:(0,_str.getString)("form_title","block_class_material")},formClass:"block_class_material\\form\\add_material",saveButtonText:(0,_str.getString)("save","block_class_material"),returnFocus:triggerElement});modalForm.addEventListener(modalForm.events.SUBMIT_BUTTON_PRESSED,(event=>{event.preventDefault(),(0,_jquery.default)('input[name="cmid"]').val(Number(root.data("course-module-id"))),modalForm.validateElements()&&modalForm.submitFormAjax()})),modalForm.show(),modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(async event=>{await drawItem(root,event.detail),_notification.default.addNotification({message:(0,_str.getString)("upload_success","block_class_material"),type:"success",closebutton:!0,annouce:!0})}))}))})(root),loadActions(root)}}));

//# sourceMappingURL=main.min.js.map